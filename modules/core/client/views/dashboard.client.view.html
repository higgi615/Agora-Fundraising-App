<section ng-controller="DashboardController">

<!-- BIZ DASHBOARD -->
<div class="container-fluid" style="background-color: #dddddd" ng-show="isBiz&&!addEvent_flag">
  <div class="row" style="margin-top:5px">
    <div class="col-sm-12 col-12">
      <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
        <div class="container-fluid">
          <h2 style="text-align:center">Welcome to Your Dashboard</h2>
          <div class="row" style="justify-content: center">
            <ul class="nav nav-tabs">
              <li class="active"><a class="nav-link org-menu-selects" style="color:#1B5689; cursor:pointer" ng-click="showMenu=0">Requests</a></li>
              <li><a class="org-menu-selects nav-link" style="color:#1B5689; cursor:pointer" ng-click="showMenu=1">Calendar</a></li>
              <li><a class="org-menu-selects nav-link" style="color:#1B5689; cursor:pointer" ng-click="showMenu=2">Past Events</a></li>
            </ul>
          </div>
          <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu == 0">
            <h2 style="text-align:center">Requests</h2>
            <div class = "panel" style="max-height: 300px;overflow: auto">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                <tr>
                  <th>Event Name</th>
                  <th>Date</th>
                  <th>Organizations Requesting</th>
                  <th>Start Time</th>
                  <th>End Time</th>
                  <th>Modify Events</th>
                </tr>
                </thead>
                <tbody ng-repeat="event in eventList|orderBy:'date'">
                <tr ng-if="filterByUser(event)" ng-init="eventObj = event">
                  <th>{{event.name}}</th>
                  <td>{{event.dateOfEvent | date:"MM'/'dd'/'yyyy"}}</td>
                  <td>{{event.organizationsPending[0].organizationName}}</td>
                  <td>{{event.startTime | date:"hh':'mm"}}</td>
                  <td>{{event.endTime  | date:"hh':'mm"}}</td>
                  <td>
                    <button class="btn" style="display: inline-block; margin:auto;background-color: #F5A623;border: solid 1px #D38401; color:white" ng-click="acceptEvent(event)">Accept</button>
                    <button class="btn btn-danger" style="display: inline-block; margin:auto" ng-click="deleteEvent(eventObj);">Cancel</button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
            <!-- ADD EVENT BUTTON -->
            <div class="row" style="justify-content: center">
              <button class="btn" style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401" ng-click="addEvent_flag=1">Add Event</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ORG VIEWS -->
<div class="container-fluid" style="background-color: #dddddd" ng-show="isOrg&&!isBiz">
  <div class="row" style="margin-top:5px">
    <div class="col-sm-6 col-6">


      <!-- TABBED MENU -->
      <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
        <div class="container-fluid">
          <h1 style="text-align:center">Upcoming Events</h1>

          <!-- TABS -->
          <div class="row" style="justify-content: center">
            <ul class="nav nav-tabs">
              <li class="active"><a class="nav-link org-menu-selects" style="color:#1B5689; cursor:pointer" ng-click="showMenu=0">Requests</a></li>
              <li><a class="org-menu-selects nav-link" style="color:#1B5689; cursor:pointer" ng-click="showMenu=1">Calendar</a></li>
              <li><a class="org-menu-selects nav-link" style="color:#1B5689; cursor:pointer" ng-click="showMenu=2">Past Events</a></li>
            </ul>
          </div>

          <!-- REQUESTS LIST -->
          <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu == 0">
            <!-- PUT CONTENT HERE -->
            <h2 style="text-align:center">Requests</h2>
            <div class = "panel" style="max-height: 300px;overflow: auto">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                <tr>
                  <th>Business Name</th>
                  <th>Date</th>
                  <th>Location</th>
                  <th>Cancel Event</th>
                </tr>
                </thead>
                <tbody ng-repeat="event in eventList">
                <tr>
                  <th>{{event.user.displayName}}</th>
                  <td>{{event.dateOfEvent | date:"MM'/'dd'/'yyyy"}}</td>
                  <td>{{event.location}}</td>
                  <td>
                    <button class="btn btn-danger" style="display: block; margin:auto" ng-click="">Cancel</button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- REQUEST EVENT BUTTON -->
          <div class="row" style="justify-content: center">
            <button class="btn" style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401" ng-click="requestEvent_flag=1">Request Event</button>
          </div>
        </div>
      </div>
    </div>

    <!--<div class="col-sm-6 col-6">-->
      <!--&lt;!&ndash; FUNDS RAISED &ndash;&gt;-->
      <!--<div class="row">-->
        <!--<div class="col-sm-12 col-12">-->
          <!--<div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">-->
            <!--<h1>Total Funds Raised</h1>-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--&lt;!&ndash; ORGANIZATION BIO &ndash;&gt;-->
      <!--<div class="row">-->
        <!--<div class="col-sm-12 col-12">-->
          <!--<div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">-->
            <!--<h1>Organization Bio</h1>-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</div>-->

  <!-- BIZ CREATE EVENT FORM -->
  <div class="container-fluid" style="background-color: #dddddd" ng-show="addEvent_flag">
    <div class="row">
      <div class="col-sm-2 col-2">
      </div>
      <div class="col-sm-8 col-8">
        <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
          <h1 style="text-align: center">Add Event</h1>
          <div class="col-md-12">
            <form name="eventForm" class="form-horizontal" ng-submit="createEvent(eventForm.$valid)" novalidate>
              <fieldset>
                <div class="form-group" show-errors>
                  <label class="control-label" for="name">Name</label>
                  <input name="name" type="text" ng-model="name" id="name" class="form-control" placeholder="Name" required>
                  <div ng-messages="eventForm.name.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">Event name is required.</p>
                  </div>
                </div>
                <div class="form-group" show-errors>
                  <label for="dateOfEvent">Event Date (Use dropdown arrow on the right to choose from calendar)</label>
                  <input type="date" class="form-control" id="dateOfEvent" ng-model="dateOfEvent">
                  <div ng-messages="eventForm.dateOfEvent.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">Date of event is required.</p>
                  </div>
                </div>
                <div class="form-group" show-errors>
                  <label for="sTime">Event Start Time</label>
                  <input type="time" class="form-control" id="sTime" ng-model="startTime">
                  <div ng-messages="eventForm.startTime.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">Start time is required.</p>
                  </div>
                </div>
                <div class="form-group" show-errors>
                  <label for="eTime">Event End Time</label>
                  <input type="time" class="form-control" id="eTime" ng-model="endTime">
                  <div ng-messages="eventForm.endTime.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">End time is required.</p>
                  </div>
                </div>
                <div class="form-group" show-errors>
                  <label class="control-label" for="location">Location</label>
                  <input name="name" type="text" ng-model="location" id="location" class="form-control" placeholder="Address" required>
                  <div ng-messages="eventForm.location.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">Address is required.</p>
                  </div>
                </div>
                <div class="form-group">
                  <button type="submit" class="btn btn-default" ng-click="addEvent_flag=0;loadEventList()">Create</button>
                </div>
                <div ng-show="error" class="text-danger">
                  <strong ng-bind="error"></strong>
                </div>
              </fieldset>
            </form>
          </div>
          <div class="row" style="justify-content: center">
            <button class="btn" style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401" ng-click="addEvent_flag=0">Return to Dashboard</button>
          </div>
        </div>
      </div>
      <div class="col-sm-2 col-2">
      </div>
    </div>
  </div>

</section>
