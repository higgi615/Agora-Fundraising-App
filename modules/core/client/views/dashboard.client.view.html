<section ng-controller="DashboardController">


  <!-- ORG VIEWS -->
  <div class="container-fluid" ng-show="isOrg&&!requestEvent_flag" ng-init="requestEvent_flag=0">
    <div class="row" style="margin-top:5px;">
      <!-- TABBED MENU -->
      <div class="jumbotron">
        <div class="container-fluid">
          <h1 style="text-align:center">Upcoming Events</h1>

          <!-- TABS -->
          <div class="row" style="justify-content: center">
            <ul class="nav nav-tabs">
              <li ng-class="{ active: activeTab == 'requests'}"><a class="nav-link org-menu-selects" style="color:black; cursor:pointer"
                                    ng-click="showMenu=0; setActiveTab('requests')" >Requests</a></li>
              <li ng-class="{ active: activeTab == 'calendar'}"><a class="org-menu-selects nav-link" style="color:black; cursor:pointer" ng-click="showMenu=1;setActiveTab('calendar')">Calendar</a>
              </li>
              <li ng-class="{ active: activeTab == 'past-events'}"><a class="org-menu-selects nav-link" style="color:black; cursor:pointer" ng-click="showMenu=2;setActiveTab('past-events')">Past
                Events</a></li>
            </ul>
          </div>

          <!-- REQUESTS LIST -->
          <div class="row" style="justify-content: center;" ng-init="showMenu=0" ng-show="showMenu == 0">
            <!-- PUT CONTENT HERE -->
            <h2 style="text-align:center">Requests</h2>
            <div class="panel" style="max-height: 300px;overflow: auto">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                <tr>
                  <th>Description</th>
                  <th>Date</th>
                  <th>Location</th>
                  <th>Time</th>
                  <th>Status</th>
                  <th>Cancel Request</th>
                </tr>
                </thead>
                <tbody ng-repeat="event in eventList">
                <tr ng-show="filterOrgEvents(event)">
                  <th>{{event.name}}</th>
                  <td>{{event.dateOfEvent | date:"MM'/'dd'/'yyyy"}}</td>
                  <td>{{event.location}}</td>
                  <td>{{event.startTime | date:"hh:mm a"}} - {{event.endTime | date:"hh:mm a"}}</td>
                  <td>{{generateStatus(event)}}
                  <td>
                    <button class="btn btn-danger" style="display: block; margin:auto"
                            ng-click="$parent.deleteOrgRequest(event)">Cancel
                    </button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- REQUEST EVENT BUTTON -->
          <div class="row" style="justify-content: center">
            <button class="btn"
                    style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401"
                    ng-click="requestEvent_flag=1">Request Event
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--&lt;!&ndash;Menu 1 (AKA: the Calender Tab) &ndash;&gt;-->
  <!--<div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu == 1">-->
    <!--<div id="calendarOrg" ui-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources"></div>-->
  <!--</div>-->



  <!-- ORG REQUEST EVENT -->
  <div class="container-fluid" ng-show="requestEvent_flag">
    <div class="row">
      <div class="col-sm-12 col-12">
        <div class="jumbotron">
          <h1 style="text-align: center">Request Event</h1>
          <div class="panel" style="max-height: 300px;overflow: auto">
          <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
              <th>Business Name</th>
              <th>Description</th>
              <th>Date</th>
              <th>Location</th>
              <th>Time</th>
              <th>Request Event</th>
            </tr>
            </thead>
            <tbody ng-repeat="event in eventList">
            <tr ng-init="eventObj = event" ng-show="$parent.displayOrgNonRequest(event)">
              <th>{{event.user.displayName}}</th>
              <th>{{event.name}}</th>
              <td>{{event.dateOfEvent | date:"MM'/'dd'/'yyyy"}}</td>
              <td>{{event.location}}</td>
              <td>{{event.startTime | date:"hh:mm a"}} - {{event.endTime | date:"hh:mm a"}}</td>
              <td>
                <button class="btn"
                        style="display: block; margin:auto; background-color: green;border: solid 1px darkgreen;color:white"
                        ng-click="$parent.requestEvent(event)">Request
                </button>
              </td>
            </tr>
            </tbody>
          </table>
          </div>
          <div class="row" style="justify-content: center">
            <button class="btn"
                    style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401"
                    ng-click="requestEvent_flag=0;loadEventList()">Return to Dashboard
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BIZ DASHBOARD -->
  <div class="container-fluid" ng-show="isBiz&&!addEvent_flag&&!acceptEvent_flag"
       ng-init="addEvent_flag=0;acceptEvent_flag=0">
    <div class="row" style="margin-top:5px">
      <div class="col-sm-12 col-12">
        <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
          <div class="container-fluid">
            <h2 style="text-align:center">Welcome to Your Dashboard</h2>
            <!-- TABS -->
            <div class="row" style="justify-content: center">
              <ul class="nav nav-tabs">
                <li ng-class="{ active: activeTab == 'requests'}"><a class="nav-link org-menu-selects" style="color:black; cursor:pointer"
                                                                     ng-click="showMenu=0; setActiveTab('requests')" >Requests</a></li>
                <li ng-class="{ active: activeTab == 'calendar'}"><a class="org-menu-selects nav-link" style="color:black; cursor:pointer" ng-click="showMenu=1;setActiveTab('calendar')">Calendar</a>
                </li>
                <li ng-class="{ active: activeTab == 'past-events'}"><a class="org-menu-selects nav-link" style="color:black; cursor:pointer" ng-click="showMenu=2;setActiveTab('past-events')">Past
                  Events</a></li>
              </ul>
            </div>
            <!--Menu 0 (AKA: the Requests Tab) -->
            <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu == 0">
              <h2 style="text-align:center">Requests</h2>
              <div class="panel" style="max-height: 300px">
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <th>Date</th>
                    <th>Organizations Requesting</th>
                    <th>Time</th>
                    <th>Location</th>
                    <th>Event Description</th>
                    <th>Accepted Organization</th>
                    <th></th>
                  </tr>
                  </thead>
                  <tbody ng-repeat="event in eventList|orderBy:'date'">
                  <tr ng-if="filterByUser(event)">
                    <td>{{event.dateOfEvent | date:"MM'/'dd'/'yyyy"}}</td>
                    <td>{{event.organizationsPending.length}}</td>
                    <td>{{event.startTime | date:"hh:mm a" }} - {{event.endTime | date:"hh:mm a" }}</td>
                    <td>{{event.location}}</td>
                    <td>{{event.name}}</td>
                    <td>{{event.organizationConfirmed}}</td>
                    <td>
                      <button class="btn"
                              style="display: inline-block; margin:auto;background-color: forestgreen; border: solid 1px darkgreen; color:white"
                              ng-click="toggleAcceptFlag();$parent.setGlobalEvent(event); acceptEvent_flag=1">Accept
                      </button>
                      <button class="btn"
                              style="display: inline-block; margin:auto;background-color: #F5A623;border: solid 1px #D38401; color:white"
                              ng-click="">Edit
                      </button>
                      <button class="btn btn-danger"
                              style="display: inline-block; margin:auto;"
                              ng-click="deleteEvent(event);loadEventList()">Cancel
                      </button>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
              <!-- ADD EVENT BUTTON -->
              <div class="row" style="justify-content: center">
                <button class="btn"
                        style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401"
                        ng-click="addEvent_flag=1">Create Event
                </button>
              </div>
            </div>
            <!--Menu 1 (AKA: the Calender Tab) -->
            <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu==1&&isBiz==1">
              <div id="calendar" ui-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources"></div>
            </div>
            <!--Menu 1 (AKA: the Calender Tab) -->
            <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu==1&&isBiz==0">
              <div id="calendarOrg" ui-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources"></div>
            </div>
            <!--Menu 2 (AKA: the Past events Tab) -->
            <div class="row" style="justify-content: center" ng-init="showMenu=0" ng-show="showMenu == 2">
              <p>Insert the requests here</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BIZ ACCEPT EVENT FORM -->
  <!--<div class="container-fluid" style="background-color: #dddddd" ng-show="acceptEvent_flag">-->
    <div class="row" ng-show="acceptEvent_flag">
      <div class="col-sm-2 col-2">
      </div>
      <div class="col-sm-8 col-8">
        <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
          <h1 style="text-align: center">Accept Event</h1>
          <div class="radio" ng-repeat="org in globalEvent.organizationsPending">
            <label><input type="radio" name="orgRadio" ng-model="$parent.index_accept"
                          value={{$index}}>{{org}}</label>
          </div>
          <div class="row" style="justify-content: center">
            <button class="btn"
                    style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401"
                    ng-click="acceptEvent(index_accept);toggleAcceptFlag();loadEventList()">Approve Event
            </button>
          </div>
          <div class="row" style="justify-content: center">
            <button class="btn"
                    style="display: block; margin:auto; margin-bottom:6px; color: white; background-color: #F5A623;border: solid 1px #D38401"
                    ng-click="toggleAcceptFlag();loadEventList()">Return to Dashboard
            </button>
          </div>
        </div>
      </div>
      <div class="col-sm-2 col-2">
      </div>
    </div>
  <!--</div>-->

  <!--Tab Content-->


  <!-- BIZ CREATE EVENT FORM -->
    <div class="row" ng-show="addEvent_flag">
      <div class="col-sm-2 col-2">
      </div>
      <div class="col-sm-8 col-8">
        <div class="jumbotron" style="padding:5px;border-width:1px;border-color:black;border-style:solid">
          <h1 style="text-align: center">Create Event</h1>
          <div style="padding-bottom:2px">
            <form>
              <div class="form-group">
                <label for="name">Event Description</label>
                <input type="text" class="form-control" ng-model="name" id="name"maxlength="60" ng-maxlength="60" required>
                <div ng-messages="events.name.$error" role="alert">
                  <p class="help-block error-text" ng-message="required">Event description is required</p>
                </div>
              </div>
              <div class="form-group">
                <label for="location">Location</label>
                <input type="text" class="form-control" ng-model="location" id="location" maxlength="60" ng-maxlength="60" required>
                <div ng-messages="events.location.$error" role="alert">
                  <p class="help-block error-text" ng-message="required">Location is required</p>
                </div>
              </div>
              <div class="form-group">
                <label for="date">Event Date (Use dropdown arrow on the right to choose from calendar)</label>
                <input type="date" class="form-control" id="date" ng-model="date" required>
                <div ng-messages="events.date.$error" role="alert">
                  <p class="help-block error-text" ng-message="required">Date is required</p>
                </div>
              </div>
              <div class="form-group">
                <label for="sTime">Event Start Time</label>
                <input type="time" class="form-control" id="sTime" ng-model="sTime" required>
                <div ng-messages="events.sTime.$error" role="alert">
                  <p class="help-block error-text" ng-message="required">Start time is required</p>
                </div>
              </div>
              <div class="form-group">
                <label for="eTime">Event End Time</label>
                <input type="time" class="form-control" id="eTime" ng-model="eTime" required>
                <div ng-messages="events.eTime.$error" role="alert">
                  <p class="help-block error-text" ng-message="required">End time is required</p>
                </div>
              </div>
              <div class="form-group">
                <label for="requireTax">Require Tax ID?</label>
                <input type="checkbox" id="requireTax" ng-model="requireTax">
              </div>
              <div class="form-group">
                <div style="width:720px; display:inline-block; padding-left:160px">
                  <button class="btn"
                          style="float: center-left;color: white; background-color: #1B5689;border: solid 1px #0A4578; width: 200px"
                          type="submit" ng-click="createEvent();addEvent_flag=0;loadEventList()"
                          ng-disabled="events.$invalid">Create Event
                  </button>
                  <button class="btn"
                          style="float: center-right; color: white; background-color: #F5A623;border: solid 1px #D38401; width: 200px"
                          ng-click="addEvent_flag=0">Cancel
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="col-sm-2 col-2">
        </div>
      </div>
    </div>


</section>
</body>
